<div class="modal fade modal-md" id="exampleModalToggle" aria-hidden="true" aria-labelledby="exampleModalToggleLabel"
    tabindex="-1">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h1 class="modal-title fs-5" id="exampleModalToggleLabel">Enter Your Email</h1>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form #emailForm="ngForm" (ngSubmit)="onSubmit(emailForm)">
                    <mat-form-field appearance="fill">
                        <mat-label>Email</mat-label>
                        <input matInput type="email" id="email" name="email" ngModel required email />
                    </mat-form-field>
                    <br>

                    <button mat-raised-button color="primary" type="submit" [disabled]="!emailForm.valid">
                        Submit
                    </button>
                </form>
            </div>
            <div class="modal-footer" *ngIf="showNext">
                <button class="btn btn-primary" data-bs-target="#exampleModalToggle2" data-bs-toggle="modal"
                    data-bs-dismiss="modal">Enter Otp</button>

            </div>
        </div>
    </div>
</div>
<div class="modal fade" id="exampleModalToggle2" aria-hidden="true" aria-labelledby="exampleModalToggleLabel2"
    tabindex="-1">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h1 class="modal-title fs-5" id="exampleModalToggleLabel2">Verify Password</h1>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <p>Enter the OTP which we have sent to your email {{this.otpRequest.email}}</p>
                <form #otpForm="ngForm" (ngSubmit)="onOtpSubmit(otpForm)">
                    <mat-form-field appearance="fill">
                        <mat-label>Enter the Otp</mat-label>
                        <input matInput type="number" id="otp" name="otp" ngModel required otp />
                    </mat-form-field>

                    <button mat-raised-button color="primary" type="submit" [disabled]="!otpForm.valid">
                        Submit
                    </button>
                </form>
            </div>
            <div class="modal-footer" *ngIf="goNext">
                <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#staticBackdrop">
                    Enter Password
                </button>
                <button class="btn btn-primary" data-bs-target="#exampleModalToggle" data-bs-toggle="modal">Back to
                    first</button>
            </div>
        </div>
    </div>
</div>

<!--3rd Modal -->
<div class="modal fade" id="staticBackdrop" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
    aria-labelledby="staticBackdropLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="staticBackdropLabel">Enter The New Password</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form [formGroup]="updatePasswordForm" (ngSubmit)="updatePasswordForm.valid&&UpdatePassword()">
                    <mat-form-field appearance="fill">
                        <mat-label>Password</mat-label>
                        <input matInput [type]="hide ? 'password' : 'text'" formControlName="password" />
                        <button mat-icon-button matSuffix (click)="hide = !hide" [attr.aria-label]="'Hide password'"
                        [attr.aria-pressed]="hide">
                        <i class="fa-solid fa-eye"></i>
                    </button>
                    </mat-form-field>
                    <br>

                    <mat-form-field appearance="fill">
                        <mat-label>Confirm Password</mat-label>
                        <input matInput [type]="hide ? 'password' : 'text'" formControlName="confirmPassword" />
                        <mat-error
                            *ngIf="confirmPassword.hasError('matching') && !confirmPassword.hasError('required')">Passwords
                            Don't Match</mat-error>
                    </mat-form-field>

                    <button type="submit">Submit</button>
                </form>
            </div>
        </div>
    </div>
</div>